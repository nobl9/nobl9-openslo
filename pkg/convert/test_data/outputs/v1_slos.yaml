- apiVersion: n9/v1alpha
  kind: SLO
  metadata:
    name: web-availability
    displayName: SLO for web availability
    project: my-project
    labels:
      env:
        - prod
      team:
        - team-a
        - team-b
    annotations:
      my.domain/custom: foo
  spec:
    description: Example Prometheus SLO
    service: web
    budgetingMethod: Occurrences
    indicator:
      metricSource:
        name: prometheus
        project: default
        kind: Agent
    objectives:
      - displayName: Good
        value: 1.0
        name: ok
        target: 0.95
        timeSliceTarget: 0.9
        countMetrics:
          incremental: true
          good:
            prometheus:
              promql: sum(http_request_duration_seconds_bucket{handler="/api/v1/slos",le="2.5"})
          total:
            prometheus:
              promql: sum(http_request_duration_seconds_count{handler="/api/v1/slos"})
    timeWindows:
      - unit: Week
        count: 1
        isRolling: false
        calendar:
          startTime: 2022-01-01 12:00:00
          timeZone: America/New_York
    alertPolicies:
      - fast-burn-5x-for-last-10m
